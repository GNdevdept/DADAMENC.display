<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>사내 디지털 사이니지</title>
<meta name="viewport" content="width=1920, height=1080, initial-scale=1.0">
<style>
*{box-sizing:border-box;font-family:Pretendard,'Noto Sans KR',sans-serif}
html,body{margin:0;width:100%;height:100%;background:#0e1a2b;color:#fff}
.wrapper{display:grid;grid-template-columns:3fr 2fr;height:100%;padding:40px;gap:32px}
.brand{font-size:48px;font-weight:800}
.time{font-size:96px;font-weight:700;margin-top:40px}
.date{font-size:32px;opacity:.85}
.weather{font-size:26px;margin-top:14px}
.location{font-size:18px;opacity:.7}
.panel{background:#162a45;border-radius:20px;padding:28px}
.panel h2{margin:0 0 20px;font-size:32px;border-bottom:2px solid rgba(255,255,255,.15)}
.status-item{display:flex;align-items:center;margin-bottom:16px;font-size:26px}
.dot{width:14px;height:14px;border-radius:50%;margin-right:12px}
.green{background:#2ecc71}
.yellow{background:#f1c40f}
.red{background:#e74c3c}
</style>
</head>
<body>

<div class="wrapper">
  <div>
    <div class="brand">DADAM E&C</div>
    <div class="time" id="time"></div>
    <div class="date" id="date"></div>
    <div class="weather" id="weather">날씨 불러오는 중…</div>
    <div class="location">보타닉게이트 지식산업센터</div>
  </div>
  <div>
    <div class="panel">
      <h2>출장 · 외근 현황</h2>
      <div id="travelView"></div>
    </div>
    <div class="panel" style="margin-top:24px">
      <h2>업무 일정</h2>
      <div id="scheduleView"></div>
    </div>
  </div>
</div>

<script>
function updateTime(){
  const n=new Date();
  time.innerText=n.toLocaleTimeString('ko-KR',{timeZone:'Asia/Seoul',hour12:false});
  date.innerText=n.toLocaleDateString('ko-KR',{timeZone:'Asia/Seoul',year:'numeric',month:'2-digit',day:'2-digit',weekday:'short'});
}
setInterval(updateTime,1000);updateTime();

async function loadWeather(){
  try{
    const r=await fetch("https://api.openweathermap.org/data/2.5/weather?lat=37.56015&lon=126.82695&units=metric&lang=kr&appid=a33a7b44981e0a4738c0a7a023bbc7b9");
    const d=await r.json();
    weather.innerText = d.weather[0].description + " · " + Math.round(d.main.temp) + "℃";
  }catch{ weather.innerText="날씨 오류"; }
}
loadWeather(); setInterval(loadWeather,600000);

function render(){
  const travel=JSON.parse(localStorage.getItem("travel")||"[]");
  const schedule=JSON.parse(localStorage.getItem("schedule")||"[]");
  travelView.innerHTML="";
  scheduleView.innerHTML="";
  travel.forEach(p=>{
    travelView.innerHTML+=`<div class="status-item"><span class="dot ${p.color}"></span>${p.name} (${p.team}) - ${p.desc}</div>`;
  });
  schedule.forEach(s=>{
    scheduleView.innerHTML+=`<div>${s.date} · ${s.title} - ${s.desc}</div>`;
  });
}
setInterval(render,1000); render();
</script>
</body>
</html>
