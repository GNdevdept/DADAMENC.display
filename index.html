<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>DADAM ENC 사이니지</title>
<meta name="viewport" content="width=1920, height=1080">
<style>
*{box-sizing:border-box;font-family:Pretendard,'Noto Sans KR',sans-serif}
html,body{margin:0;width:100%;height:100%;background:#0b1626;color:#fff}
.wrapper{display:grid;grid-template-columns:3fr 2fr;height:100%;padding:48px;gap:40px}
.brand{font-size:42px;font-weight:800}
.time{font-size:96px;font-weight:700;margin-top:28px}
.date{font-size:30px;opacity:.85}
.panel{background:#13263f;border-radius:18px;padding:26px;margin-top:24px}
.panel h2{margin:0 0 16px;font-size:28px;border-bottom:1px solid rgba(255,255,255,.15)}

.weather-row{display:flex;align-items:center;margin-bottom:16px}
.weather-row img{width:46px;height:46px;margin-right:12px}
.weather-main{font-size:22px}
.weather-loc strong{font-size:1.8em;font-weight:800}

.person{display:flex;align-items:flex-start;margin-bottom:14px}
.dot{width:27px;height:27px;border-radius:50%;margin-right:12px;
background:linear-gradient(145deg,rgba(255,255,255,.6),rgba(0,0,0,.2));
position:relative;overflow:hidden}
.dot::after{content:"";position:absolute;inset:-50%;
background:linear-gradient(120deg,transparent 45%,rgba(255,255,255,.8) 50%,transparent 55%);
animation:shine 3.5s infinite linear}
.green{background:#2ecc71}
.yellow{background:#f1c40f}
.red{background:#e74c3c}
@keyframes shine{from{transform:translateX(-100%) rotate(25deg)}to{transform:translateX(100%) rotate(25deg)}}

.name{font-size:1.5em;font-weight:800}
.sub{opacity:.8;margin-left:39px}
</style>
</head>
<body>
<div class="wrapper">
<div>
<div class="brand">DADAM ENC</div>
<div class="time" id="time"></div>
<div class="date" id="date"></div>

<div class="panel">
<h2>날씨</h2>
<div class="weather-row">
<img id="iconHQ"><div>
<div class="weather-main" id="weatherHQ"></div>
<div class="weather-loc"><strong>다담이엔씨 본사</strong> (마곡 보타닉게이트 지식산업센터)</div>
</div></div>
<div class="weather-row">
<img id="iconFactory"><div>
<div class="weather-main" id="weatherFactory"></div>
<div class="weather-loc"><strong>다담이엔씨 공장</strong> (충청남도 당진시 순성면 731-19)</div>
</div></div>
<div class="weather-row">
<img id="iconOrion"><div>
<div class="weather-main" id="weatherOrion"></div>
<div class="weather-loc"><strong>오리온 R&D센터 현장</strong> (서울특별시 강남구 도곡동 177-6)</div>
</div></div>
</div>

<div class="panel">
<h2>사내 공지사항</h2>
<div id="notice"></div>
</div>
</div>

<div>
<div class="panel">
<h2>출장 · 외근 현황</h2>
<div id="travelList"></div>
</div>

<div class="panel">
<h2>업무 일정</h2>
<div id="schedule"></div>
</div>
</div>
</div>

<script>
function updateTime(){
 const n=new Date();
 time.innerText=n.toLocaleTimeString('ko-KR');
 date.innerText=n.toLocaleDateString('ko-KR',{year:'numeric',month:'2-digit',day:'2-digit',weekday:'short'});
}
setInterval(updateTime,1000);updateTime();

async function loadWeather(lat,lon,iconEl,textEl){
 const r=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&units=metric&lang=kr&appid=a33a7b44981e0a4738c0a7a023bbc7b9`);
 const d=await r.json();
 textEl.innerText=`${d.weather[0].description} · ${Math.round(d.main.temp)}℃`;
 iconEl.src=`https://openweathermap.org/img/wn/${d.weather[0].icon}@2x.png`;
}
loadWeather(37.56015,126.82695,iconHQ,weatherHQ);
loadWeather(36.864687409697794,126.70225194391269,iconFactory,weatherFactory);
loadWeather(37.48698715399347,127.04622944228052,iconOrion,weatherOrion);

function render(){
 const travel=JSON.parse(localStorage.getItem("travel")||"[]");
 const schedules=JSON.parse(localStorage.getItem("schedule")||"[]");
 notice.innerText=localStorage.getItem("notice")||"";
 travelList.innerHTML="";
 schedule.innerHTML="";
 travel.forEach(p=>{
  travelList.innerHTML+=`
  <div class="person">
   <span class="dot ${p.color}"></span>
   <div>
    <div class="name">${p.name}</div>
    <div class="sub">${p.department} · ${p.task}</div>
   </div>
  </div>`;
 });
 schedules.forEach(s=>{
  schedule.innerHTML+=`<div style="margin-bottom:12px"><strong>${s.date} · ${s.title}</strong><div>${s.detail}</div></div>`;
 });
}
setInterval(render,500);render();
</script>
</body>
</html>
