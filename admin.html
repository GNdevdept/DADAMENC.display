<!DOCTYPE html>
<!--
DADAM ENC ê´€ë¦¬ì í˜ì´ì§€ (admin.html)

ì´ íŒŒì¼ì€ 'ê´€ë¦¬ ì „ìš©' í˜ì´ì§€ì…ë‹ˆë‹¤.
- ê¸°ì¡´ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
- ì¶”ê°€ / ìˆ˜ì • / ì‚­ì œ ê°€ëŠ¥
- ì €ì¥ ë²„íŠ¼ì„ ëˆŒëŸ¬ì•¼ ì‚¬ì´ë‹ˆì§€ ë°˜ì˜
-->
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>DADAM ENC ê´€ë¦¬ì</title>
<style>
*{font-family:Pretendard,'Noto Sans KR',sans-serif}
body{
  background:#f4f6f8;
  padding:30px;
}
.section{
  background:#fff;
  border-radius:14px;
  padding:22px;
  margin-bottom:28px;
}
input,select,textarea,button{
  padding:8px;
  margin:4px;
}
.item{
  background:#eef1f4;
  border-radius:10px;
  padding:10px;
  margin-top:8px;
}
.actions{
  position:fixed;
  bottom:30px;
  right:30px;
  display:flex;
  gap:12px;
}
.dot{
  width:18px;
  height:18px;
  border-radius:50%;
  display:inline-block;
  margin-right:6px;
}
.green{background:#2ecc71}
.yellow{background:#f1c40f}
.red{background:#e74c3c}
</style>
</head>

<body>
<h1>DADAM ENC ê´€ë¦¬ì í˜ì´ì§€</h1>

<!-- ì¶œì¥/ì™¸ê·¼ ê´€ë¦¬ -->
<div class="section">
<h2>ì¶œì¥ Â· ì™¸ê·¼ Â· ì—°ì°¨</h2>

<input id="tName" placeholder="ì´ë¦„">
<select id="tDept">
  <option>ê²½ì˜ë¶€</option>
  <option>ê²½ì˜ì§€ì›ë¶€</option>
  <option>R&Dì—°êµ¬ì†Œ</option>
  <option>ê¸°ìˆ ì˜ì—…ë¶€</option>
  <option>ê³µì‚¬ì§€ì›ë¶€</option>
</select>
<select id="tStatus">
  <option value="ì¶œì¥">ì¶œì¥</option>
  <option value="ì™¸ê·¼">ì™¸ê·¼</option>
  <option value="ì—°ì°¨">ì—°ì°¨</option>
</select>
<input id="tTask" placeholder="ì—…ë¬´ ë‚´ìš©">
<button onclick="addTravel()">ì¶”ê°€</button>

<div id="travelEdit"></div>
</div>

<!-- ì—…ë¬´ ì¼ì • ê´€ë¦¬ -->
<div class="section">
<h2>ì—…ë¬´ ì¼ì •</h2>
<input type="date" id="sDate">
<input id="sTitle" placeholder="ì¼ì • ì œëª©">
<textarea id="sDetail" placeholder="ì„¸ë¶€ì‚¬í•­"></textarea>
<button onclick="addSchedule()">ì¶”ê°€</button>
<div id="scheduleEdit"></div>
</div>

<!-- ê³µì§€ì‚¬í•­ -->
<div class="section">
<h2>ì‚¬ë‚´ ê³µì§€ì‚¬í•­</h2>
<textarea id="noticeText"></textarea>
</div>

<!-- í•˜ë‹¨ ë²„íŠ¼ -->
<div class="actions">
<button onclick="location.href='index.html'">ì‚¬ì´ë‹ˆì§€ë¡œ</button>
<button onclick="saveAll()">ğŸ’¾ ì €ì¥</button>
</div>

<script>
/* =========================
   ê¸°ì¡´ ë°ì´í„° ë¡œë“œ
   ========================= */
let travel =
  JSON.parse(localStorage.getItem("travel")||"[]");
let schedule =
  JSON.parse(localStorage.getItem("schedule")||"[]");

function color(s){
  return s==="ì¶œì¥"?"green":s==="ì™¸ê·¼"?"yellow":"red";
}

/* ì¶œì¥ ì¶”ê°€ */
function addTravel(){
  travel.push({
    name:tName.value,
    department:tDept.value,
    task:tTask.value,
    color:color(tStatus.value)
  });
  render();
}

/* ì¼ì • ì¶”ê°€ */
function addSchedule(){
  schedule.push({
    date:sDate.value,
    title:sTitle.value,
    detail:sDetail.value
  });
  render();
}

/* ë Œë”ë§ */
function render(){
  travelEdit.innerHTML="";
  scheduleEdit.innerHTML="";

  travel.forEach((t,i)=>{
    travelEdit.innerHTML += `
      <div class="item">
        <span class="dot ${t.color}"></span>
        <input value="${t.name}"
          onchange="travel[${i}].name=this.value">
        <input value="${t.department}"
          onchange="travel[${i}].department=this.value">
        <input value="${t.task}"
          onchange="travel[${i}].task=this.value">
        <button
          onclick="travel.splice(${i},1);render()">
          ì‚­ì œ
        </button>
      </div>`;
  });

  schedule.forEach((s,i)=>{
    scheduleEdit.innerHTML += `
      <div class="item">
        <input type="date" value="${s.date}"
          onchange="schedule[${i}].date=this.value">
        <input value="${s.title}"
          onchange="schedule[${i}].title=this.value">
        <textarea
          onchange="schedule[${i}].detail=this.value">
          ${s.detail}
        </textarea>
        <button
          onclick="schedule.splice(${i},1);render()">
          ì‚­ì œ
        </button>
      </div>`;
  });
}

/* ì €ì¥ */
function saveAll(){
  localStorage.setItem("travel",JSON.stringify(travel));
  localStorage.setItem("schedule",JSON.stringify(schedule));
  localStorage.setItem("notice",noticeText.value);
  alert("ì €ì¥ ì™„ë£Œ");
}

/* ê³µì§€ ë¡œë“œ */
noticeText.value =
  localStorage.getItem("notice") || "";

render();
</script>
</body>
</html>
